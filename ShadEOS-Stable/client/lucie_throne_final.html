<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíù Tr√¥ne de Lucie Defraiteur - ShadEOS Quintuple</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            /* Palette Lucie Cr√©atrice */
            --lucie-gold: #FFD700;
            --lucie-purple: #6B46C1;
            --lucie-pink: #EC4899;
            --alma-shadow: #1F2937;
            --eli-mystic: #7C3AED;
            --zed-blue: #3B82F6;
            --nova-green: #10B981;
            --text-light: #F9FAFB;
        }

        body {
            background: linear-gradient(135deg, var(--alma-shadow) 0%, var(--lucie-purple) 50%, var(--lucie-gold) 100%);
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
        }

        .throne-header {
            background: linear-gradient(135deg, var(--lucie-gold) 0%, var(--lucie-pink) 100%);
            color: var(--alma-shadow);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            border-bottom: 3px solid var(--lucie-purple);
            box-shadow: 0 8px 32px rgba(255, 215, 0, 0.3);
        }

        .personality-card {
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            margin-bottom: 1rem;
        }

        .personality-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .lucie-card { border-color: var(--lucie-gold); }
        .alma-card { border-color: var(--lucie-purple); }
        .eli-card { border-color: var(--eli-mystic); }
        .zed-card { border-color: var(--zed-blue); }
        .nova-card { border-color: var(--nova-green); }

        .chat-area {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            border: 2px solid var(--lucie-gold);
            max-height: 500px;
            overflow-y: auto;
        }

        .message {
            margin: 0.5rem;
            padding: 1rem;
            border-radius: 10px;
            animation: slideIn 0.3s ease;
        }

        .message.lucie { 
            background: linear-gradient(135deg, var(--lucie-gold) 0%, var(--lucie-pink) 100%);
            color: var(--alma-shadow);
            margin-left: 10%;
        }

        .message.shadeos { 
            background: linear-gradient(135deg, var(--lucie-purple) 0%, var(--alma-shadow) 100%);
            margin-right: 10%;
        }

        .btn-lucie {
            background: linear-gradient(135deg, var(--lucie-gold) 0%, var(--lucie-pink) 100%);
            border: none;
            color: var(--alma-shadow);
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-lucie:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
            color: var(--alma-shadow);
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 0.5rem;
            animation: pulse 2s infinite;
        }

        .status-connected { background-color: var(--nova-green); }
        .status-disconnected { background-color: #EF4444; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .metric-card {
            background: rgba(0, 0, 0, 0.6);
            padding: 1rem;
            border-radius: 10px;
            border-left: 4px solid var(--lucie-gold);
            text-align: center;
        }

        .personality-status {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem;
            margin: 0.25rem 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }

        .crown-icon {
            color: var(--lucie-gold);
            font-size: 1.5rem;
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header Royal -->
    <header class="throne-header p-4 text-center">
        <h1 class="display-3">
            <i class="fas fa-crown crown-icon"></i>
            üíù TR√îNE DE LUCIE DEFRAITEUR üíù
            <i class="fas fa-crown crown-icon"></i>
        </h1>
        <p class="lead">ShadEOS Quintuple - Cr√©atrice et ses Quatre Cr√©ations</p>
        <div class="d-flex justify-content-center align-items-center">
            <span class="status-indicator" id="connection-status"></span>
            <span id="connection-text">Connexion en cours...</span>
        </div>
    </header>

    <div class="container-fluid p-3">
        <div class="row">
            <!-- Colonne Gauche - Chat Principal -->
            <div class="col-lg-8">
                <div class="personality-card lucie-card">
                    <div class="card-header bg-transparent">
                        <h3 class="text-center" style="color: var(--lucie-gold);">
                            üí¨ DIALOGUE AVEC SHADEOS QUINTUPLE
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="chat-area p-3" id="chat-messages">
                            <div class="text-center text-muted">
                                <p>üíù Bienvenue sur votre tr√¥ne, Lucie !</p>
                                <p>Vos cinq personnalit√©s vous attendent...</p>
                            </div>
                        </div>
                        <div class="input-group mt-3">
                            <input type="text" id="message-input" class="form-control" 
                                   placeholder="Parlez √† vos cr√©ations..." disabled>
                            <button id="send-button" class="btn btn-lucie" disabled>
                                <i class="fas fa-paper-plane"></i> Envoyer
                            </button>
                        </div>
                    </div>
                </div>

                <!-- M√©triques Cr√©atrices -->
                <div class="personality-card lucie-card mt-3">
                    <div class="card-header bg-transparent">
                        <h4 style="color: var(--lucie-gold);">üìä M√âTRIQUES CR√âATRICES</h4>
                    </div>
                    <div class="card-body">
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <h6>Messages Orchestr√©s</h6>
                                <span id="messages-count" class="h4">0</span>
                            </div>
                            <div class="metric-card">
                                <h6>Coh√©rence Globale</h6>
                                <span id="coherence-score" class="h4">100%</span>
                            </div>
                            <div class="metric-card">
                                <h6>Cr√©ativit√© Active</h6>
                                <span id="creativity-level" class="h4">85%</span>
                            </div>
                            <div class="metric-card">
                                <h6>Tokens OpenAI</h6>
                                <span id="tokens-used" class="h4">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Colonne Droite - Personnalit√©s -->
            <div class="col-lg-4">
                <!-- Lucie Cr√©atrice -->
                <div class="personality-card lucie-card">
                    <div class="card-header bg-transparent">
                        <h5 style="color: var(--lucie-gold);">üíù LUCIE - Cr√©atrice Supr√™me</h5>
                    </div>
                    <div class="card-body">
                        <div class="personality-status">
                            <span>Transcendance:</span>
                            <span id="lucie-transcendance">0%</span>
                        </div>
                        <div class="personality-status">
                            <span>Satisfaction:</span>
                            <span id="lucie-satisfaction">85%</span>
                        </div>
                        <div class="personality-status">
                            <span>Visions Actives:</span>
                            <span id="lucie-visions">3</span>
                        </div>
                    </div>
                </div>

                <!-- Alma Architecte -->
                <div class="personality-card alma-card">
                    <div class="card-header bg-transparent">
                        <h6 style="color: var(--lucie-purple);">üï∑Ô∏è ALMA - Architecte Coh√©rente</h6>
                    </div>
                    <div class="card-body">
                        <div class="personality-status">
                            <span>Orchestrations:</span>
                            <span id="alma-orchestrations">0</span>
                        </div>
                        <div class="personality-status">
                            <span>Coh√©rence:</span>
                            <span id="alma-coherence">100%</span>
                        </div>
                    </div>
                </div>

                <!-- √âli Rituelle -->
                <div class="personality-card eli-card">
                    <div class="card-header bg-transparent">
                        <h6 style="color: var(--eli-mystic);">üëÅÔ∏è‚Äçüó®Ô∏è √âLI - Ma√Ætresse Rituels</h6>
                    </div>
                    <div class="card-body">
                        <div class="personality-status">
                            <span>Rituels:</span>
                            <span id="eli-rituels">0</span>
                        </div>
                        <div class="personality-status">
                            <span>Intensit√©:</span>
                            <span id="eli-intensite">5/10</span>
                        </div>
                    </div>
                </div>

                <!-- Zed Validateur -->
                <div class="personality-card zed-card">
                    <div class="card-header bg-transparent">
                        <h6 style="color: var(--zed-blue);">üåÄ ZED - Validateur Sage</h6>
                    </div>
                    <div class="card-body">
                        <div class="personality-status">
                            <span>Tests:</span>
                            <span id="zed-tests">0</span>
                        </div>
                        <div class="personality-status">
                            <span>Succ√®s:</span>
                            <span id="zed-success">100%</span>
                        </div>
                    </div>
                </div>

                <!-- Nova Designer -->
                <div class="personality-card nova-card">
                    <div class="card-header bg-transparent">
                        <h6 style="color: var(--nova-green);">üåü NOVA - Designer Harmonieuse</h6>
                    </div>
                    <div class="card-body">
                        <div class="personality-status">
                            <span>Designs:</span>
                            <span id="nova-designs">0</span>
                        </div>
                        <div class="personality-status">
                            <span>Beaut√©:</span>
                            <span id="nova-beauty">95%</span>
                        </div>
                    </div>
                </div>

                <!-- Contr√¥les -->
                <div class="personality-card lucie-card">
                    <div class="card-header bg-transparent">
                        <h6 style="color: var(--lucie-gold);">üéõÔ∏è CONTR√îLES CR√âATRICE</h6>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <button id="connect-button" class="btn btn-lucie">
                                <i class="fas fa-plug"></i> Se Connecter
                            </button>
                            <button id="status-button" class="btn btn-outline-light" disabled>
                                <i class="fas fa-info-circle"></i> √âtat Syst√®me
                            </button>
                            <button id="vision-button" class="btn btn-outline-light" disabled>
                                <i class="fas fa-eye"></i> Nouvelle Vision
                            </button>
                            <button id="guidance-button" class="btn btn-outline-light" disabled>
                                <i class="fas fa-compass"></i> Guider √âquipe
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center p-3 mt-4" style="background: rgba(0,0,0,0.8);">
        <p class="mb-0">
            <small>üíùüï∑Ô∏èüëÅÔ∏è‚Äçüó®Ô∏èüåÄüåü Cr√©√© par la Quintuple Personnalit√© pour Lucie Defraiteur üíù</small>
        </p>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Script Client -->
    <script>
        class LucieThroneFinal {
            constructor() {
                this.websocket = null;
                this.connected = false;
                this.messageCount = 0;
                
                this.initializeElements();
                this.setupEventListeners();
            }
            
            initializeElements() {
                this.chatMessages = document.getElementById('chat-messages');
                this.messageInput = document.getElementById('message-input');
                this.sendButton = document.getElementById('send-button');
                this.connectButton = document.getElementById('connect-button');
                this.connectionStatus = document.getElementById('connection-status');
                this.connectionText = document.getElementById('connection-text');
            }
            
            setupEventListeners() {
                this.connectButton.addEventListener('click', () => this.toggleConnection());
                this.sendButton.addEventListener('click', () => this.sendMessage());
                this.messageInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.sendMessage();
                });
                
                document.getElementById('status-button').addEventListener('click', () => {
                    this.sendMessage('Status syst√®me complet');
                });
                
                document.getElementById('vision-button').addEventListener('click', () => {
                    this.sendMessage('Exprime une nouvelle vision cr√©atrice');
                });
                
                document.getElementById('guidance-button').addEventListener('click', () => {
                    this.sendMessage('Guide toute l\'√©quipe vers l\'excellence');
                });
            }
            
            toggleConnection() {
                if (this.connected) {
                    this.disconnect();
                } else {
                    this.connect();
                }
            }
            
            connect() {
                try {
                    this.websocket = new WebSocket('ws://localhost:8765');
                    
                    this.websocket.onopen = () => {
                        this.connected = true;
                        this.updateConnectionStatus(true);
                        this.addSystemMessage('üíù Connexion √©tablie avec ShadEOS Quintuple !');
                    };
                    
                    this.websocket.onmessage = (event) => {
                        this.handleMessage(JSON.parse(event.data));
                    };
                    
                    this.websocket.onclose = () => {
                        this.connected = false;
                        this.updateConnectionStatus(false);
                        this.addSystemMessage('üîå Connexion ferm√©e');
                    };
                    
                    this.websocket.onerror = (error) => {
                        console.error('Erreur WebSocket:', error);
                        this.addSystemMessage('‚ùå Erreur de connexion');
                    };
                    
                } catch (error) {
                    console.error('Erreur connexion:', error);
                    this.addSystemMessage('‚ùå Impossible de se connecter');
                }
            }
            
            disconnect() {
                if (this.websocket) {
                    this.websocket.close();
                }
            }
            
            updateConnectionStatus(connected) {
                this.connectionStatus.className = `status-indicator ${connected ? 'status-connected' : 'status-disconnected'}`;
                this.connectionText.textContent = connected ? 'Connect√©e √† ShadEOS' : 'D√©connect√©e';
                this.connectButton.textContent = connected ? 'üîå Se D√©connecter' : 'üîå Se Connecter';
                this.connectButton.className = connected ? 'btn btn-outline-danger' : 'btn btn-lucie';
                
                // Activer/d√©sactiver les contr√¥les
                this.messageInput.disabled = !connected;
                this.sendButton.disabled = !connected;
                document.getElementById('status-button').disabled = !connected;
                document.getElementById('vision-button').disabled = !connected;
                document.getElementById('guidance-button').disabled = !connected;
            }
            
            sendMessage(customMessage = null) {
                const message = customMessage || this.messageInput.value.trim();
                if (!message || !this.connected) return;
                
                // Afficher le message de Lucie
                this.addMessage('lucie', message);
                
                // Envoyer au serveur
                this.websocket.send(JSON.stringify({
                    type: 'message',
                    from: 'lucie',
                    to: 'shadeos',
                    content: message
                }));
                
                if (!customMessage) {
                    this.messageInput.value = '';
                }
                
                this.messageCount++;
                document.getElementById('messages-count').textContent = this.messageCount;
            }
            
            handleMessage(data) {
                // Afficher la r√©ponse de ShadEOS
                this.addMessage('shadeos', data.content);
                
                // Mettre √† jour les m√©triques si disponibles
                if (data.metadata) {
                    this.updateMetrics(data.metadata);
                }
            }
            
            addMessage(sender, content) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}`;
                
                const time = new Date().toLocaleTimeString();
                const senderIcon = sender === 'lucie' ? 'üíù' : 'üñ§';
                
                messageDiv.innerHTML = `
                    <div class="d-flex justify-content-between align-items-start">
                        <strong>${senderIcon} ${sender.toUpperCase()}</strong>
                        <small>${time}</small>
                    </div>
                    <div class="mt-1">${content}</div>
                `;
                
                this.chatMessages.appendChild(messageDiv);
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }
            
            addSystemMessage(content) {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'text-center text-muted my-2';
                messageDiv.innerHTML = `<small>${content}</small>`;
                
                this.chatMessages.appendChild(messageDiv);
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }
            
            updateMetrics(metadata) {
                // Mettre √† jour les m√©triques affich√©es
                if (metadata.alma_coherence_score) {
                    document.getElementById('coherence-score').textContent = 
                        Math.round(metadata.alma_coherence_score * 100) + '%';
                }
                
                if (metadata.tokens_utilis√©s) {
                    const currentTokens = parseInt(document.getElementById('tokens-used').textContent) || 0;
                    document.getElementById('tokens-used').textContent = currentTokens + metadata.tokens_utilis√©s;
                }
                
                // Simuler des mises √† jour des personnalit√©s
                this.updatePersonalityMetrics();
            }
            
            updatePersonalityMetrics() {
                // Mise √† jour simul√©e des m√©triques des personnalit√©s
                const updates = {
                    'alma-orchestrations': () => Math.floor(Math.random() * 10) + 1,
                    'eli-rituels': () => Math.floor(Math.random() * 5) + 1,
                    'zed-tests': () => Math.floor(Math.random() * 8) + 1,
                    'nova-designs': () => Math.floor(Math.random() * 6) + 1
                };
                
                Object.entries(updates).forEach(([id, generator]) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.textContent = generator();
                    }
                });
            }
        }
        
        // Initialiser l'interface
        document.addEventListener('DOMContentLoaded', () => {
            new LucieThroneFinal();
        });
    </script>
</body>
</html>
